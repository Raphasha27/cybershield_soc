@if (currentView() === 'landing') {
<section class="landing-page">
  <div class="landing-hero">
    <div class="hero-bg-glow"></div>
    <div class="hero-content">
      <div class="hero-logo">
        <span class="logo-icon">‚¨°</span>
        <span class="logo-text">CyberShield</span>
      </div>
      <h1 class="hero-title">Cloud-Native Security <br><span class="highlight">Intelligence Platform</span></h1>
      <p class="hero-subtitle">Next-generation SOC operations powered by AI. Real-time threat detection, automated
        response, and darknet intelligence unified in one premium dashboard.</p>
      <div class="hero-actions">
        <button class="action-btn primary large" (click)="getStarted()">Get Started ‚Äî Deploy SOC</button>
        <button class="action-btn large" (click)="setView('login')">Operator Login</button>
      </div>
      <div class="hero-stats">
        <div class="landing-stat">
          <span class="stat-num">99.9%</span>
          <span class="stat-desc">Threat Neutralization</span>
        </div>
        <div class="landing-stat">
          <span class="stat-num">24/7</span>
          <span class="stat-desc">Active Monitoring</span>
        </div>
        <div class="landing-stat">
          <span class="stat-num">AI-Driven</span>
          <span class="stat-desc">Pattern Recognition</span>
        </div>
      </div>
    </div>
    <div class="hero-visual">
      <div class="visual-mock">
        <div class="mock-header">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
        <div class="mock-body">
          <div class="mock-line" style="width: 80%"></div>
          <div class="mock-line" style="width: 60%"></div>
          <div class="mock-line" style="width: 90%; height: 60px; background: rgba(0,212,255,0.1)"></div>
          <div class="mock-grid">
            <span></span><span></span><span></span><span></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- NEW FEATURES SECTION -->
  <div class="landing-features">
    <div class="features-header">
      <span class="badge-tag">CORE CAPABILITIES</span>
      <h2>Unified Defense for the <span class="highlight">Modern Enterprise</span></h2>
      <p>CyberShield provides comprehensive cybersecurity solutions designed to protect businesses from sophisticated
        threats.</p>
    </div>

    <div class="features-grid">
      <div class="feature-item">
        <div class="feature-icon">üõ°Ô∏è</div>
        <h3>Real-Time Threat Detection</h3>
        <p>Comprehensive protection including behavioral monitoring and real-time response for businesses of all sizes.
        </p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">üåê</div>
        <h3>Next-Gen WAF</h3>
        <p>Advanced Web Application Firewall protecting websites and CMS from SQL injections and cross-site scripting
          (XSS).</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">üëÅÔ∏è</div>
        <h3>Active Pulse Monitor</h3>
        <p>Suspicious visitor monitoring, automated IP management, and detailed forensic threat logging.</p>
      </div>
      <div class="feature-item">
        <div class="feature-icon">‚öñÔ∏è</div>
        <h3>Compliance & Safeguard</h3>
        <p>Ensure data integrity and meet global compliance requirements while defending against zero-day attacks.</p>
      </div>
    </div>
  </div>
</section>
}

@if (currentView() === 'login') {
<section class="login-page">
  <div class="login-card">
    <div class="login-header">
      <div class="logo-icon">‚¨°</div>
      <h2>Operator Authentication</h2>
      <p>Access the localized CyberShield SOC network</p>
    </div>
    <div class="login-form">
      <div class="form-group">
        <label for="email">Operator ID / Email</label>
        <input type="email" id="email" #emailInput value="admin@cybershield.so" placeholder="admin@cybershield.so">
      </div>
      <div class="form-group">
        <label for="password">Security Protocol / Password</label>
        <input type="password" id="password" #passInput value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" placeholder="Enter password">
      </div>
      <button class="action-btn primary full-width" [disabled]="isLoginLoading()"
        (click)="login(emailInput.value, passInput.value)">
        @if (isLoginLoading()) {
        <span class="loader"></span> Authenticating...
        } @else {
        Authorize & Access Terminal
        }
      </button>
    </div>
    <div class="login-footer">
      <p>Encrypted Session ‚Ä¢ RSA-4096 Certified</p>
    </div>
  </div>
</section>
}

@if (isLoggedIn()) {
<!-- Existing authenticated content -->
<!-- HEADER -->
<header class="header">
  <div class="header-content">

    <!-- Logo -->
    <div class="logo-section">
      <div class="logo-icon-wrap" (click)="setView('landing')" style="cursor:pointer">
        <span class="logo-icon">‚¨°</span>
        <span class="logo-pulse"></span>
      </div>
      <div class="logo-text">
        <h1>CyberShield</h1>
        <span class="logo-subtitle">Security Operations Center</span>
      </div>
    </div>

    <!-- Nav -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
      @for (item of navItems; track item.id) {
      <button class="nav-btn" [class.active]="currentView() === item.id" (click)="setView(item.id)"
        [attr.aria-current]="currentView() === item.id ? 'page' : null" [id]="'nav-' + item.id">
        <span class="nav-icon">{{ item.icon }}</span>
        <span class="nav-label">{{ item.label }}</span>
        @if (item.id === 'darknet') {
        <span class="nav-badge darknet">{{ darknetFeed().length }}</span>
        }
      </button>
      }
    </nav>

    <!-- Actions -->
    <div class="header-actions">
      <div class="search-bar" [class.focused]="isSearchFocused()">
        <span class="search-icon-left">‚¨°</span>
        <input id="global-search" type="text" placeholder="Search threats, incidents..." (keyup.enter)="search($event)"
          (focus)="isSearchFocused.set(true)" (blur)="isSearchFocused.set(false)">
      </div>

      <button id="alert-panel-btn" class="icon-btn" [class.active]="isAlertPanelOpen()" (click)="toggleAlertPanel()"
        title="Security Alerts">
        <span class="icon-btn-icon">üîî</span>
        @if (notifications().length > 0) {
        <span class="badge-count">{{ notifications().length }}</span>
        }
      </button>

      <button id="ai-panel-btn" class="icon-btn ai-btn" [class.active]="isAIPanelOpen()" (click)="toggleAI()"
        title="CyberSentinel AI">
        <span class="ai-btn-glow"></span>
        <span class="icon-btn-icon">‚óà</span>
      </button>

      <div class="profile-group">
        <button id="profile-btn" class="user-profile-btn" (click)="toggleProfileModal()">
          <div class="user-profile">
            <div class="user-avatar">{{ adminProfile().name.charAt(0) }}</div>
            <div class="user-info">
              <span class="user-name">{{ adminProfile().name }}</span>
              <span class="user-role">{{ adminProfile().role }}</span>
            </div>
          </div>
        </button>
        <button class="logout-btn" (click)="logout()" title="Logout"> Logout </button>
      </div>
    </div>

  </div>

  <!-- Threat Banner -->
  <div class="threat-banner" [class.critical-mode]="threatLevel() > 80">
    <div class="threat-banner-inner">
      <div class="threat-level-info">
        <span class="threat-label">THREAT LEVEL</span>
        <span class="threat-status-text" [class.critical]="threatLevel() > 80"
          [class.elevated]="threatLevel() > 60 && threatLevel() <= 80">
          {{ threatLevel() > 80 ? 'CRITICAL' : (threatLevel() > 60 ? 'ELEVATED' : 'MODERATE') }}
        </span>
        <span class="threat-percent">{{ threatLevel().toFixed(1) }}%</span>
      </div>
      <div class="threat-gauge-bar">
        <div class="gauge-fill" [style.width.%]="threatLevel()" [class.high]="threatLevel() > 80"
          [class.medium]="threatLevel() > 60 && threatLevel() <= 80">
        </div>
      </div>
      <div class="threat-meta">
        <span class="threat-ai-label">‚óà AI Heuristic Engine Active</span>
        <button class="action-btn primary small" (click)="setView('threats')" id="banner-view-threats">View
          Threats</button>
      </div>
    </div>
  </div>
</header>

<!-- MAIN CONTENT -->
<main class="main-content">
  @if (currentView() === 'dashboard') {
  <section class="view" id="view-dashboard">
    <!-- Metric Cards -->
    <div class="metrics-grid">
      <div class="metric-card critical" (click)="setView('threats')" id="metric-critical-alerts" tabindex="0"
        role="button">
        <div class="metric-card-bg"></div>
        <div class="metric-header">
          <span class="metric-icon">‚óâ</span>
          <h4>Critical Alerts</h4>
        </div>
        <div class="metric-value">
          <span class="value">{{ displayedCriticalAlerts() }}</span>
          <span class="trend up">+12%</span>
        </div>
        <div class="metric-footer"><span class="metric-label">Last 24 hours</span></div>
        <div class="metric-glow g-critical"></div>
      </div>

      <div class="metric-card warning" (click)="setView('incidents')" id="metric-active-incidents" tabindex="0"
        role="button">
        <div class="metric-card-bg"></div>
        <div class="metric-header">
          <span class="metric-icon">‚óé</span>
          <h4>Active Incidents</h4>
        </div>
        <div class="metric-value">
          <span class="value">{{ displayedActiveIncidents() }}</span>
          <span class="trend down">-8%</span>
        </div>
        <div class="metric-footer"><span class="metric-label">Requiring attention</span></div>
        <div class="metric-glow g-warning"></div>
      </div>

      <div class="metric-card info" (click)="setView('vulnerabilities')" id="metric-vulnerabilities" tabindex="0"
        role="button">
        <div class="metric-card-bg"></div>
        <div class="metric-header">
          <span class="metric-icon">‚óá</span>
          <h4>Vulnerabilities</h4>
        </div>
        <div class="metric-value">
          <span class="value">{{ displayedVulnerabilities() }}</span>
          <span class="trend up">+5%</span>
        </div>
        <div class="metric-footer"><span class="metric-label">Unpatched systems</span></div>
        <div class="metric-glow g-info"></div>
      </div>

      <div class="metric-card success" (click)="setView('compliance')" id="metric-systems-protected" tabindex="0"
        role="button">
        <div class="metric-card-bg"></div>
        <div class="metric-header">
          <span class="metric-icon">‚óÜ</span>
          <h4>Systems Protected</h4>
        </div>
        <div class="metric-value">
          <span class="value">{{ displayedSystemsProtected().toLocaleString() }}</span>
          <span class="trend neutral">0%</span>
        </div>
        <div class="metric-footer"><span class="metric-label">Network endpoints</span></div>
        <div class="metric-glow g-success"></div>
      </div>
    </div>

    <!-- Charts Row -->
    <div class="charts-grid">

      <!-- Threat Timeline -->
      <div class="chart-card large">
        <div class="card-header">
          <h3>Threat Activity Timeline</h3>
          <div class="chart-controls">
            @for (r of ['24H', '7D', '30D']; track r) {
            <button class="chart-btn" [class.active]="chartTimeRange() === r" (click)="setChartRange(r)">{{ r
              }}</button>
            }
          </div>
        </div>
        <div class="chart-container">
          <canvas id="threatTimelineChart"></canvas>
        </div>
      </div>

      <!-- Threat Distribution Donut -->
      <div class="chart-card medium">
        <div class="card-header">
          <h3>Threat Distribution</h3>
        </div>
        <div class="chart-container">
          <canvas id="threatDistChart"></canvas>
        </div>
      </div>

    </div>

    <!-- Dual Section -->
    <div class="dual-section">

      <!-- Recent Incidents -->
      <div class="section-card">
        <div class="card-header">
          <h3>Recent Security Incidents</h3>
          <button class="view-all-btn" (click)="setView('incidents')" id="btn-view-all-incidents">View All ‚Üí</button>
        </div>
        <div class="incidents-list">
          @for (inc of incidents().slice(0, 5); track inc.id) {
          <div class="incident-item" [class]="inc.severity" (click)="openIncident(inc)" tabindex="0" role="button">
            <div class="incident-header">
              <span class="incident-title">{{ inc.type }}</span>
              <span class="incident-time">{{ inc.time }}</span>
            </div>
            <p class="incident-description">{{ inc.id }} ‚Äî {{ inc.description | slice:0:80 }}...</p>
            @if (inc.assignee) {
            <span class="incident-assignee">üë§ {{ inc.assignee }}</span>
            }
          </div>
          }
        </div>
      </div>

      <!-- Network Traffic -->
      <div class="section-card">
        <div class="card-header">
          <h3>Network Traffic Monitor</h3>
          <span class="live-indicator"><span class="live-dot"></span>LIVE</span>
        </div>
        <div class="traffic-visualization">
          <canvas id="networkTrafficChart"></canvas>
        </div>
        <div class="traffic-stats">
          <div class="stat-item">
            <span class="stat-label">Inbound</span>
            <span class="stat-value">2.4 GB/s</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Outbound</span>
            <span class="stat-value">1.8 GB/s</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Blocked</span>
            <span class="stat-value" style="color: var(--color-danger)">347 MB/s</span>
          </div>
        </div>
      </div>

    </div>

    <!-- Attack Sources + Terminal -->
    <div class="dual-section">

      <!-- Attack Sources -->
      <div class="section-card">
        <div class="card-header">
          <h3>Top Attack Sources</h3>
          <span class="live-indicator"><span class="live-dot"></span>LIVE</span>
        </div>
        <div class="attack-sources">
          @for (src of attackSources(); track src.country) {
          <div class="source-item">
            <span class="country-flag">{{ src.flag }}</span>
            <span class="country-name">{{ src.country }}</span>
            <div class="source-bar">
              <div class="bar-fill" [style.width.%]="src.percent"></div>
            </div>
            <span class="source-count">{{ src.count.toLocaleString() }}</span>
          </div>
          }
        </div>
      </div>

      <!-- Live Log Terminal -->
      <div class="terminal-card">
        <div class="terminal-header">
          <div class="terminal-controls">
            <span class="control-dot red"></span>
            <span class="control-dot yellow"></span>
            <span class="control-dot green"></span>
          </div>
          <div class="terminal-title">cybershield_soc_v3.0.0 ‚Äî siem_engine ‚Äî (120x30)</div>
          <span class="live-indicator"><span class="live-dot"></span>LIVE</span>
        </div>
        <div class="terminal-body" #systemTerminal>
          @if (logs().length === 0) {
          <div class="log-line"><span class="log-timestamp">[--:--:--]</span><span class="log-tag info">INFO</span><span
              class="log-message">Initialising SIEM event stream...</span></div>
          }
          @for (log of logs(); track log.timestamp + log.msg) {
          <div class="log-line">
            <span class="log-timestamp">[{{ log.timestamp }}]</span>
            <span class="log-tag" [class]="log.level">{{ log.level.toUpperCase() }}</span>
            @if (log.source) {
            <span class="log-source">{{ log.source }}</span>
            }
            <span class="log-message">{{ log.msg }}</span>
          </div>
          }
        </div>
      </div>

    </div>
  </section>
  }

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         THREATS VIEW
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  @if (currentView() === 'threats') {
  <section class="view" id="view-threats">
    <div class="view-header">
      <h2>‚ö° Threat Intelligence Center</h2>
      <div style="display:flex; gap: 0.75rem;">
        <span class="live-indicator"><span class="live-dot"></span>{{ threats().length }} Active Threats</span>
        <button class="action-btn primary" (click)="showToast('Refreshing threat feed...','info','üì°')"
          id="btn-refresh-threats">Refresh Feed</button>
      </div>
    </div>

    <div class="threats-table-container">
      <table class="threats-table" aria-label="Active Threats">
        <thead>
          <tr>
            <th>Threat ID</th>
            <th>Type</th>
            <th>Severity</th>
            <th>Source IP</th>
            <th>Target</th>
            <th>Vector</th>
            <th>Detected</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          @for (threat of threats(); track threat.id) {
          <tr>
            <td class="threat-id-cell">{{ threat.id }}</td>
            <td>{{ threat.type }}</td>
            <td><span class="severity-badge" [class]="threat.severity">{{ threat.severity }}</span></td>
            <td class="mono-cell">{{ threat.source }}</td>
            <td>{{ threat.target }}</td>
            <td class="mono-cell small-text">{{ threat.attackVector }}</td>
            <td class="mono-cell small-text">{{ threat.detected }}</td>
            <td><span class="status-badge" [class]="threat.status.toLowerCase()">{{ threat.status }}</span></td>
            <td><button class="table-action-btn" (click)="performThreatAction(threat)"
                [id]="'action-' + threat.id">Analyse</button></td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </section>
  }

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         INCIDENTS ‚Äî KANBAN
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  @if (currentView() === 'incidents') {
  <section class="view" id="view-incidents">
    <div class="view-header">
      <h2>üî• Incident Response</h2>
      <span class="live-indicator"><span class="live-dot"></span>{{ incidents().length }} Tracked</span>
    </div>
    <div class="incidents-kanban">
      @for (status of ['detected', 'investigating', 'containing', 'resolved']; track status) {
      <div class="kanban-column">
        <div class="column-header" [class]="status">
          <h4>{{ status }}</h4>
          <span class="count">{{ getIncidentsByStatus(status).length }}</span>
        </div>
        <div class="column-body">
          @for (inc of getIncidentsByStatus(status); track inc.id) {
          <div class="kanban-card" [class]="inc.severity">
            <div (click)="openIncident(inc)" style="cursor:pointer">
              <div class="kanban-card-header">
                <span class="kanban-card-id">{{ inc.id }}</span>
                <span class="severity-badge" [class]="inc.severity">{{ inc.severity }}</span>
              </div>
              <div class="kanban-card-title">{{ inc.type }}</div>
              <div class="kanban-card-time">üïê {{ inc.time }}</div>
            </div>
            <div class="kanban-card-actions">
              @if (status === 'detected') {
              <button (click)="updateIncidentStatus(inc.id, 'investigating')">Investigate ‚Üí</button>
              }
              @if (status === 'investigating') {
              <button class="back-btn" (click)="updateIncidentStatus(inc.id, 'detected')">‚Üê Reset</button>
              <button (click)="updateIncidentStatus(inc.id, 'containing')">Contain ‚Üí</button>
              }
              @if (status === 'containing') {
              <button class="back-btn" (click)="updateIncidentStatus(inc.id, 'investigating')">‚Üê Back</button>
              <button (click)="updateIncidentStatus(inc.id, 'resolved')">Resolve ‚úì</button>
              }
              @if (status === 'resolved') {
              <button class="back-btn" (click)="updateIncidentStatus(inc.id, 'containing')">‚Üê Reopen</button>
              }
            </div>
          </div>
          }
          @if (getIncidentsByStatus(status).length === 0) {
          <div class="kanban-empty">
            <span>‚úì No {{ status }} incidents</span>
          </div>
          }
        </div>
      </div>
      }
    </div>
  </section>
  }

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         VULNERABILITIES VIEW
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  @if (currentView() === 'vulnerabilities') {
  <section class="view" id="view-vulnerabilities">
    <div class="view-header">
      <h2>üîì Vulnerability Assessment</h2>
      <div style="display:flex; align-items:center; gap:1rem;">
        @if (isScannerActive()) {
        <div class="scan-progress-wrap">
          <span class="scan-label">Scanning... {{ scanProgress().toFixed(0) }}%</span>
          <div class="scan-bar">
            <div class="scan-fill" [style.width.%]="scanProgress()"></div>
          </div>
        </div>
        }
        <button class="action-btn primary" (click)="runScan()" [disabled]="isScannerActive()" id="btn-run-scan">
          {{ isScannerActive() ? '‚ü≥ Scanning...' : '‚¨° Run Full Scan' }}
        </button>
      </div>
    </div>
    <div class="vulnerabilities-list">
      @for (vuln of vulnerabilities(); track vuln.id) {
      <div class="vuln-item" [class]="vuln.severity">
        <div class="vuln-item-header">
          <h3 class="vuln-title">{{ vuln.title }}</h3>
          <span class="vuln-cve">{{ vuln.id }}</span>
        </div>
        <p class="vuln-description">{{ vuln.description }}</p>
        <div class="vuln-footer">
          <span>CVSS: <strong style="color: var(--color-danger)">{{ vuln.score }}/10</strong></span>
          <span>Affected Systems: <strong>{{ vuln.systems }}</strong></span>
          @if (vuln.patch) {
          <span>Patch: <strong style="color:var(--color-success)">{{ vuln.patch }}</strong></span>
          }
          <span class="severity-badge" [class]="vuln.severity">{{ vuln.severity }}</span>
        </div>
      </div>
      }
    </div>
  </section>
  }

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         DARKNET MONITOR VIEW (NEW)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  @if (currentView() === 'darknet') {
  <section class="view" id="view-darknet">
    <div class="view-header">
      <h2>üëÅ Darknet Monitor</h2>
      <div style="display:flex; align-items:center; gap:0.75rem;">
        <span class="darknet-live-badge"><span class="live-dot"></span>MONITORING ACTIVE</span>
        <button class="action-btn primary" (click)="showToast('Scanning darknet sources...','info','üëÅ')"
          id="btn-darknet-scan">Refresh Intel</button>
      </div>
    </div>

    <div class="darknet-alert-banner">
      <span class="darknet-alert-icon">‚ö†</span>
      <div>
        <strong>{{ criticalDarknetCount() }}</strong> Critical Threats detected across
        monitored dark web forums and marketplaces.
        Immediate action required for DN-001 and DN-005.
      </div>
    </div>

    <div class="darknet-grid">
      @for (item of darknetFeed(); track item.id) {
      <div class="darknet-card" [class]="item.risk">
        <div class="darknet-card-header">
          <div class="darknet-card-meta">
            <span class="darknet-id">{{ item.id }}</span>
            <span class="darknet-type-badge">{{ item.type }}</span>
          </div>
          <span class="status-badge" [class]="item.status">{{ item.status }}</span>
        </div>
        <p class="darknet-description">{{ item.description }}</p>
        <div class="darknet-card-footer">
          <span class="darknet-time">‚è± Discovered: {{ item.discovered }}</span>
          <span class="severity-badge" [class]="item.risk">{{ item.risk }}</span>
        </div>
        <button class="darknet-action-btn" (click)="showToast('Tracking item ' + item.id + '...', 'warning', 'üëÅ')"
          [id]="'darknet-action-' + item.id">
          Initiate Takedown
        </button>
      </div>
      }
    </div>
  </section>
  }

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         COMPLIANCE VIEW
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  @if (currentView() === 'compliance') {
  <section class="view" id="view-compliance">
    <div class="view-header">
      <h2>‚úì Compliance &amp; Reporting</h2>
      <button class="action-btn primary" (click)="generateReport()" id="btn-generate-report">Generate Report</button>
    </div>
    <div class="compliance-frameworks">
      @for (framework of complianceFrameworks(); track framework.name) {
      <div class="framework-card">
        <div class="framework-header">
          <h3>{{ framework.name }}</h3>
          <span class="compliance-score">{{ framework.score }}%</span>
        </div>
        <div class="compliance-bar">
          <div class="compliance-fill" [style.width.%]="framework.score"></div>
        </div>
        <div class="compliance-detail">
          <span class="framework-status">{{ framework.status }}</span>
          <span class="framework-controls">{{ framework.passed }}/{{ framework.controls }} controls</span>
        </div>
      </div>
      }
    </div>
  </section>
  }
</main>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       INCIDENT DETAIL MODAL
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
@if (isModalOpen()) {
<div class="modal-overlay active" (click)="closeModal()">
  <div class="modal-panel" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div>
        <span class="modal-id">{{ selectedIncident()?.id }}</span>
        <h3>{{ selectedIncident()?.type }}</h3>
      </div>
      <button class="close-btn" (click)="closeModal()" id="modal-close">‚úï</button>
    </div>
    <div class="modal-body">
      <div class="modal-badges">
        <span class="severity-badge" [class]="selectedIncident()?.severity">{{ selectedIncident()?.severity }}</span>
        <span class="status-badge" [class]="selectedIncident()?.status">{{ selectedIncident()?.status }}</span>
      </div>
      <p class="modal-desc">{{ selectedIncident()?.description }}</p>
      @if (selectedIncident()?.assignee) {
      <p class="modal-assignee">üë§ Assigned to: <strong>{{ selectedIncident()?.assignee }}</strong></p>
      }
      <div class="modal-actions">
        <button class="action-btn primary" (click)="isolateSystem()" id="btn-isolate-system">üîí Isolate System</button>
        <button class="action-btn" (click)="escalateIncident()" id="btn-escalate">üì¢ Escalate</button>
      </div>
    </div>
  </div>
</div>
}

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       NOTIFICATION PANEL
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="notification-panel" [class.active]="isAlertPanelOpen()" id="notification-panel">
  <div class="panel-header">
    <h3>Security Alerts</h3>
    <button class="clear-btn" (click)="clearNotifications()" id="btn-clear-alerts">Clear All</button>
  </div>
  <div class="notifications-list">
    @for (note of notifications(); track note.id) {
    <div class="notification-item" [class]="note.type">
      <div class="notification-header">
        <span class="notification-icon">{{ note.type === 'critical' ? '‚¨°' : (note.type === 'warning' ? '‚óé' : '‚Ñπ')
          }}</span>
        <span class="notification-title">{{ note.title }}</span>
        @if (note.time) { <span class="notification-time">{{ note.time }}</span> }
      </div>
      <div class="notification-body">{{ note.message }}</div>
    </div>
    }
    @if (notifications().length === 0) {
    <div class="empty-notifications">‚úì No new alerts</div>
    }
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       AI ASSISTANT SIDEBAR
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="ai-sidebar" [class.active]="isAIPanelOpen()" id="ai-sidebar">
  <div class="ai-header">
    <div class="ai-title">
      <div class="ai-avatar">‚óà</div>
      <div>
        <h3>CyberSentinel AI</h3>
        <span class="ai-status">v3.0 ¬∑ Ready to assist</span>
      </div>
    </div>
    <button class="close-btn" (click)="toggleAI()" id="ai-close-btn">‚úï</button>
  </div>

  <div class="ai-chat-body" #aiChatBody>
    @for (msg of aiMessages(); track $index) {
    <div class="chat-message" [class.user]="msg.role === 'user'" [class.bot]="msg.role === 'bot'">
      @if (msg.role === 'bot') {
      <span class="chat-avatar">‚óà</span>
      }
      <div class="message-bubble">{{ msg.text }}</div>
    </div>
    }
    @if (isAITyping()) {
    <div class="chat-message bot">
      <span class="chat-avatar">‚óà</span>
      <div class="message-bubble typing-indicator">
        <span></span><span></span><span></span>
      </div>
    </div>
    }
  </div>

  <div class="ai-suggestions">
    <button (click)="sendAIMessage('Analyze current threat level')" id="ai-suggest-threats">Threat Level</button>
    <button (click)="sendAIMessage('Summarize latest incidents')" id="ai-suggest-incidents">Incidents</button>
    <button (click)="sendAIMessage('Check darknet activity')" id="ai-suggest-darknet">Darknet</button>
    <button (click)="sendAIMessage('Compliance status')" id="ai-suggest-compliance">Compliance</button>
  </div>

  <div class="ai-input-area">
    <input id="ai-input" type="text" #aiInput placeholder="Ask CyberSentinel AI..."
      (keyup.enter)="sendAIMessage(aiInput.value); aiInput.value = ''">
    <button class="send-btn" (click)="sendAIMessage(aiInput.value); aiInput.value = ''" id="ai-send-btn">‚Üë</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       TOAST NOTIFICATIONS
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="toast-container" aria-live="polite">
  @for (toast of toasts(); track toast.id) {
  <div class="toast" [class]="toast.type">
    <span class="toast-icon">{{ toast.icon }}</span>
    <span class="toast-message">{{ toast.message }}</span>
  </div>
  }
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       PROFILE EDIT MODAL
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
@if (isProfileModalOpen()) {
<div class="modal-overlay active" (click)="toggleProfileModal()">
  <div class="modal-panel profile" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Edit Administrator Profile</h3>
      <button class="close-btn" (click)="toggleProfileModal()" id="profile-modal-close">‚úï</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="profile-name">Full Name</label>
        <input id="profile-name" type="text" #nameInput [value]="adminProfile().name" placeholder="Enter name...">
      </div>
      <div class="form-group">
        <label for="profile-role">Professional Role</label>
        <input id="profile-role" type="text" #roleInput [value]="adminProfile().role"
          placeholder="e.g. Senior Security Analyst">
      </div>
      <div class="form-group">
        <label for="profile-dept">Department</label>
        <input id="profile-dept" type="text" #deptInput [value]="adminProfile().department"
          placeholder="e.g. SOC Team Alpha">
      </div>
      <div class="modal-actions">
        <button class="action-btn primary" style="flex:1"
          (click)="saveProfile(nameInput.value, roleInput.value, deptInput.value)" id="btn-save-profile">Save
          Changes</button>
        <button class="action-btn" style="flex:1" (click)="toggleProfileModal()" id="btn-cancel-profile">Cancel</button>
      </div>
    </div>
  </div>
</div>
}
}